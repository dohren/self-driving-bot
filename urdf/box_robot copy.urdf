<?xml version="1.0"?>
<robot name="my_robot">

  <!-- Base of the robot (wooden box) -->
  <link name="base_link">
    <visual>
      <origin xyz="0 0 0.075"/> <!-- Höhe des Robots ist 15 cm, Mittelpunkt ist auf 7,5 cm -->
      <geometry>
        <box size="0.30 0.20 0.15"/> <!-- Länge: 30 cm, Breite: 20 cm, Höhe: 15 cm -->
      </geometry>
      <material name="wood">
        <color rgba="0.6 0.4 0.2 1.0"/> <!-- Holzfarbe -->
      </material>
    </visual>
    <collision>
      <origin xyz="0 0 0.075"/>
      <geometry>
        <box size="0.30 0.20 0.15"/>
      </geometry>
    </collision>
  </link>

  <gazebo reference="base_link">
    <visual>
      <material>
        <ambient>0.4 0.2 0.1 1</ambient> <!-- Rötlich-braun im Umgebungslicht -->
        <diffuse>0.6 0.3 0.2 1</diffuse> <!-- Hellbraun im Licht -->
        <specular>0.1 0.1 0.1 1</specular> <!-- Wenig Glanz -->
        <emissive>0.0 0.0 0.0 1</emissive> <!-- Keine Eigenleuchtung -->
      </material>
    </visual>
  </gazebo>

  <!-- Right wheel -->
  <link name="right_wheel">
    <visual>
      <origin xyz="0.135 -0.10 0.035" rpy="0 1.5708 0"/> <!-- 6.5 cm vom Ende, rechts -->
      <geometry>
        <cylinder radius="0.35" length="0.02"/> <!-- Durchmesser 70 cm = Radius 0.35 m, Dicke 2 cm -->
      </geometry>
      <material name="black">
        <color rgba="0 0 0 1.0"/> <!-- Schwarz für die Räder -->
      </material>
    </visual>
    <collision>
      <origin xyz="0.135 -0.10 0.035" rpy="0 1.5708 0"/>
      <geometry>
        <cylinder radius="0.35" length="0.02"/>
      </geometry>
    </collision>
  </link>

  <gazebo reference="right_wheel">
    <visual>
      <material>
        <ambient>0.1 0.1 0.1 1</ambient> <!-- Dunkleres Grau im Umgebungslicht -->
        <diffuse>0 0 0 1</diffuse> <!-- Schwarz im Licht -->
        <specular>0.1 0.1 0.1 1</specular> <!-- Wenig Glanz -->
        <emissive>0.0 0.0 0.0 1</emissive> <!-- Keine Eigenleuchtung -->
      </material>
    </visual>
  </gazebo>

  <!-- Left wheel -->
  <link name="left_wheel">
    <visual>
      <origin xyz="0.135 0.10 0.035" rpy="0 1.5708 0"/> <!-- 6.5 cm vom Ende, links -->
      <geometry>
        <cylinder radius="0.35" length="0.02"/> <!-- Durchmesser 70 cm = Radius 0.35 m, Dicke 2 cm -->
      </geometry>
      <material name="black">
        <color rgba="0 0 0 1.0"/> <!-- Schwarz für die Räder -->
      </material>
    </visual>
    <collision>
      <origin xyz="0.135 0.10 0.035" rpy="0 1.5708 0"/>
      <geometry>
        <cylinder radius="0.35" length="0.02"/>
      </geometry>
    </collision>
  </link>

  <gazebo reference="left_wheel">
    <visual>
      <material>
        <ambient>0.1 0.1 0.1 1</ambient> <!-- Dunkleres Grau im Umgebungslicht -->
        <diffuse>0 0 0 1</diffuse> <!-- Schwarz im Licht -->
        <specular>0.1 0.1 0.1 1</specular> <!-- Wenig Glanz -->
        <emissive>0.0 0.0 0.0 1</emissive> <!-- Keine Eigenleuchtung -->
      </material>
    </visual>
  </gazebo>

  <!-- Front ball -->
  <link name="front_ball">
    <visual>
      <origin xyz="-0.13 0 0.035"/> <!-- Vorne, in der Mitte -->
      <geometry>
        <sphere radius="0.05"/> <!-- Kugelradius 5 cm -->
      </geometry>
      <material name="white">
        <color rgba="1 1 1 1.0"/> <!-- Weiß für die Kugel -->
      </material>
    </visual>
    <collision>
      <origin xyz="-0.13 0 0.035"/>
      <geometry>
        <sphere radius="0.05"/>
      </geometry>
    </collision>
  </link>

  <gazebo reference="front_ball">
    <visual>
      <material>
        <ambient>0.9 0.9 0.9 1</ambient> <!-- Helles Grau im Umgebungslicht -->
        <diffuse>1 1 1 1</diffuse> <!-- Weiß im Licht -->
        <specular>0.1 0.1 0.1 1</specular> <!-- Wenig Glanz -->
        <emissive>0.0 0.0 0.0 1</emissive> <!-- Keine Eigenleuchtung -->
      </material>
    </visual>
  </gazebo>

  <!-- Joint between base_link and right wheel -->
  <joint name="right_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="right_wheel"/>
    <origin xyz="0.135 -0.10 0.035" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>

  <!-- Joint between base_link and left wheel -->
  <joint name="left_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="left_wheel"/>
    <origin xyz="0.135 0.10 0.035" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>

  <!-- Joint between base_link and front ball -->
  <joint name="front_ball_joint" type="fixed">
    <parent link="base_link"/>
    <child link="front_ball"/>
    <origin xyz="-0.13 0 0.035" rpy="0 0 0"/>
  </joint>

  <!-- Gazebo plugin for joint_state_publisher -->
  <gazebo>
    <plugin filename="gz-sim-joint-state-publisher-system" name="gz::sim::systems::JointStatePublisher">
      <joint_name>right_wheel_joint</joint_name>
      <joint_name>left_wheel_joint</joint_name>
      <joint_name>front_ball_joint</joint_name>
      <topic>joint_states</topic>
      <update_rate>30</update_rate>
    </plugin>
  </gazebo>

</robot>
